{"version":3,"file":"ScrollableContainerResizeHandler.js","names":["debounce","log","ScrollableContainerResizeHandler","bypass","getWidth","getHeight","listenForResize","onResizeStart","onResizeStop","onHeightChange","onWidthChange","onNoChange","isActive","prevScrollableContainerWidth","width","prevScrollableContainerHeight","height","onResize","_onResize","SCROLLABLE_CONTAINER_RESIZE_DEBOUNCE_INTERVAL","onStart","onStop","unlistenResize","undefined"],"sources":["../source/ScrollableContainerResizeHandler.js"],"sourcesContent":["import debounce from './utility/debounce.js'\nimport log from './utility/debug.js'\n\nexport default class ScrollableContainerResizeHandler {\n\tconstructor({\n\t\tbypass,\n\t\tgetWidth,\n\t\tgetHeight,\n\t\tlistenForResize,\n\t\tonResizeStart,\n\t\tonResizeStop,\n\t\tonHeightChange,\n\t\tonWidthChange,\n\t\tonNoChange\n\t}) {\n\t\tthis.bypass = bypass\n\n\t\tthis.onHeightChange = onHeightChange\n\t\tthis.onWidthChange = onWidthChange\n\t\tthis.onNoChange = onNoChange\n\n\t\tthis.getWidth = getWidth\n\t\tthis.getHeight = getHeight\n\t\tthis.listenForResize = listenForResize\n\n\t\tthis.onResize = debounce(\n\t\t\tthis._onResize,\n\t\t\tSCROLLABLE_CONTAINER_RESIZE_DEBOUNCE_INTERVAL,\n\t\t\t{\n\t\t\t\tonStart: onResizeStart,\n\t\t\t\tonStop: onResizeStop\n\t\t\t}\n\t\t)\n\t}\n\n\tstart() {\n\t\tthis.isActive = true\n\t\tif (this.bypass) {\n\t\t\treturn\n\t\t}\n\t\tthis.width = this.getWidth()\n\t\tthis.height = this.getHeight()\n\t\tthis.unlistenResize = this.listenForResize(this.onResize)\n\t}\n\n\tstop() {\n\t\tthis.isActive = false\n\t\tthis.width = undefined\n\t\tthis.height = undefined\n\t\tif (this.unlistenResize) {\n\t\t\tthis.unlistenResize()\n\t\t\tthis.unlistenResize = undefined\n\t\t}\n\t}\n\n\t/**\n\t * On scrollable container resize.\n\t */\n\t_onResize = () => {\n\t\t// If `VirtualScroller` has been unmounted\n\t\t// while `debounce()`'s `setTimeout()` was waiting, then exit.\n\t\t// If the `VirtualScroller` gets restarted later, it will detect\n\t\t// that `state.scrollableContainerWidth` doesn't match the actual\n\t\t// scrollable container width, and will call `this.onResize()`.\n\t\tif (!this.isActive) {\n\t\t\treturn\n\t\t}\n\n\t\tconst prevScrollableContainerWidth = this.width\n\t\tconst prevScrollableContainerHeight = this.height\n\n\t\tthis.width = this.getWidth()\n\t\tthis.height = this.getHeight()\n\n\t\tif (this.width === prevScrollableContainerWidth) {\n\t\t\tif (this.height === prevScrollableContainerHeight) {\n\t\t\t\t// The dimensions of the container didn't change,\n\t\t\t\t// so there's no need to re-layout anything.\n\t\t\t\tthis.onNoChange()\n\t\t\t} else {\n\t\t\t\t// Scrollable container height has changed,\n\t\t\t\t// so just recalculate shown item indexes.\n\t\t\t\t// No need to perform a re-layout from scratch.\n\t\t\t\tthis.onHeightChange(prevScrollableContainerHeight, this.height)\n\t\t\t}\n\t\t} else {\n\t\t\t// Reset item heights, because if scrollable container's width (or height)\n\t\t\t// has changed, then the list width (or height) most likely also has changed,\n\t\t\t// and also some CSS `@media()` rules might have been added or removed.\n\t\t\t// So re-render the list entirely.\n\t\t\tthis.onWidthChange(prevScrollableContainerWidth, this.width)\n\t\t}\n\t}\n}\n\nconst SCROLLABLE_CONTAINER_RESIZE_DEBOUNCE_INTERVAL = 250"],"mappings":";;;;;;;;AAAA,OAAOA,QAAP,MAAqB,uBAArB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;;IAEqBC,gC;EACpB,gDAUG;IAAA;;IAAA,IATFC,MASE,QATFA,MASE;IAAA,IARFC,QAQE,QARFA,QAQE;IAAA,IAPFC,SAOE,QAPFA,SAOE;IAAA,IANFC,eAME,QANFA,eAME;IAAA,IALFC,aAKE,QALFA,aAKE;IAAA,IAJFC,YAIE,QAJFA,YAIE;IAAA,IAHFC,cAGE,QAHFA,cAGE;IAAA,IAFFC,aAEE,QAFFA,aAEE;IAAA,IADFC,UACE,QADFA,UACE;;IAAA;;IAAA,mCA4CS,YAAM;MACjB;MACA;MACA;MACA;MACA;MACA,IAAI,CAAC,KAAI,CAACC,QAAV,EAAoB;QACnB;MACA;;MAED,IAAMC,4BAA4B,GAAG,KAAI,CAACC,KAA1C;MACA,IAAMC,6BAA6B,GAAG,KAAI,CAACC,MAA3C;MAEA,KAAI,CAACF,KAAL,GAAa,KAAI,CAACV,QAAL,EAAb;MACA,KAAI,CAACY,MAAL,GAAc,KAAI,CAACX,SAAL,EAAd;;MAEA,IAAI,KAAI,CAACS,KAAL,KAAeD,4BAAnB,EAAiD;QAChD,IAAI,KAAI,CAACG,MAAL,KAAgBD,6BAApB,EAAmD;UAClD;UACA;UACA,KAAI,CAACJ,UAAL;QACA,CAJD,MAIO;UACN;UACA;UACA;UACA,KAAI,CAACF,cAAL,CAAoBM,6BAApB,EAAmD,KAAI,CAACC,MAAxD;QACA;MACD,CAXD,MAWO;QACN;QACA;QACA;QACA;QACA,KAAI,CAACN,aAAL,CAAmBG,4BAAnB,EAAiD,KAAI,CAACC,KAAtD;MACA;IACD,CA9EE;;IACF,KAAKX,MAAL,GAAcA,MAAd;IAEA,KAAKM,cAAL,GAAsBA,cAAtB;IACA,KAAKC,aAAL,GAAqBA,aAArB;IACA,KAAKC,UAAL,GAAkBA,UAAlB;IAEA,KAAKP,QAAL,GAAgBA,QAAhB;IACA,KAAKC,SAAL,GAAiBA,SAAjB;IACA,KAAKC,eAAL,GAAuBA,eAAvB;IAEA,KAAKW,QAAL,GAAgBjB,QAAQ,CACvB,KAAKkB,SADkB,EAEvBC,6CAFuB,EAGvB;MACCC,OAAO,EAAEb,aADV;MAECc,MAAM,EAAEb;IAFT,CAHuB,CAAxB;EAQA;;;;WAED,iBAAQ;MACP,KAAKI,QAAL,GAAgB,IAAhB;;MACA,IAAI,KAAKT,MAAT,EAAiB;QAChB;MACA;;MACD,KAAKW,KAAL,GAAa,KAAKV,QAAL,EAAb;MACA,KAAKY,MAAL,GAAc,KAAKX,SAAL,EAAd;MACA,KAAKiB,cAAL,GAAsB,KAAKhB,eAAL,CAAqB,KAAKW,QAA1B,CAAtB;IACA;;;WAED,gBAAO;MACN,KAAKL,QAAL,GAAgB,KAAhB;MACA,KAAKE,KAAL,GAAaS,SAAb;MACA,KAAKP,MAAL,GAAcO,SAAd;;MACA,IAAI,KAAKD,cAAT,EAAyB;QACxB,KAAKA,cAAL;QACA,KAAKA,cAAL,GAAsBC,SAAtB;MACA;IACD;IAED;AACD;AACA;;;;;;;SAtDqBrB,gC;AA4FrB,IAAMiB,6CAA6C,GAAG,GAAtD"}